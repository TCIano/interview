HTTP 协议不允许服务器主动向客户端发送数据，
引入 Websocket 是为了解决客户端和服务器之间的数据传输问题
客户端和服务器之间进行请求和响应的过程中是需要一个连接通道来进行数据发送和返回的，
通常建立通道需要三次握手：通过 http 协议

### Websocket

允许服务端主动向客户端传输数据，并且浏览器和客户端只需要进行 一次握手就可以建立持久性的连接，并进行双向数据传输。
webSocket 连接：通过 http 进行一次握手
浏览器通过 JavaScript 向服务器发出建立 WebSocket 连接的请求，通过 http 进行一次握手，连接建立以后，客户端和服务器端就可以通过 TCP 连接直接交换数据。
当你获取 Web Socket 连接并且创建对象后，你可以通过 send() 方法来向服务器发送数据，并通过 onmessage 事件来接收服务器返回的数据。

### 三次握手(建立连接)

1、客户端发送了一个带有 SYN(握手信号)的 Tcp 报文到服务器。表示客户端想要和服务端建立连接。 主机 A 发送位码为 syn ＝ 1,随机产生 seq number=1234567 的数据包到服务器，主机 B 由 SYN=1 知道，A 要求建立联机。
2、服务端接收到客户端的请求，返回客户端报文，这个报文带有 SYN 和 ACK 标志，询问客户端是否准备好。 主机 B 收到请求后要确认联机信息，向 A 发送 ack number=(主机 A 的 seq+1),syn=1,ack=1,随机产生 seq=7654321 的包。
3、客户端再次响应服务端一个 ACK(确认字符)，表示我已经准备好。主机 A 收到后检查 ack number 是否正确，即第一次发送的 seq number+1,以及位码 ack 是否为 1，若正确，主机 A 会再发送 ack number=(主机 B 的 seq+1),ack=1，主机 B 收到后确认 seq 值与 ack=1 则连接建立成功。
![](https://cdn.nlark.com/yuque/0/2022/jpeg/29071883/1654600695214-728d1c25-b0cd-4a5a-b056-e1172f0467f4.jpeg)
